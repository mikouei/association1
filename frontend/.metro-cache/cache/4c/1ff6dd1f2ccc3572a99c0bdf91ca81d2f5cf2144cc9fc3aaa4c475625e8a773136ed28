{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../utils/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":31,"index":180}}],"key":"XoJ+jbKCrEi38eKczMqtlbk+TCk=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/context/AuthContext.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _utilsApi = require(_dependencyMap[2], \"../utils/api\");\n  var api = _interopDefault(_utilsApi);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)();\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    const [token, setToken] = (0, _react.useState)(null);\n\n    // Charger l'utilisateur depuis le cache au dÃ©marrage\n    (0, _react.useEffect)(() => {\n      loadUser();\n    }, []);\n    const loadUser = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('authToken');\n        const storedUser = await AsyncStorage.default.getItem('user');\n        if (storedToken && storedUser) {\n          setToken(storedToken);\n          setUser(JSON.parse(storedUser));\n        }\n      } catch (error) {\n        console.error('Erreur chargement utilisateur:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (identifier, password, accessToken = null) => {\n      try {\n        const payload = accessToken ? {\n          accessToken\n        } : {\n          identifier,\n          password\n        };\n        const response = await api.default.post('/auth/login', payload);\n        const {\n          token: newToken,\n          user: newUser\n        } = response.data;\n        await AsyncStorage.default.setItem('authToken', newToken);\n        await AsyncStorage.default.setItem('user', JSON.stringify(newUser));\n        setToken(newToken);\n        setUser(newUser);\n        return {\n          success: true\n        };\n      } catch (error) {\n        console.error('Erreur login:', error);\n        return {\n          success: false,\n          error: error.response?.data?.error || 'Erreur de connexion'\n        };\n      }\n    };\n    const logout = async () => {\n      try {\n        await AsyncStorage.default.removeItem('authToken');\n        await AsyncStorage.default.removeItem('user');\n        setToken(null);\n        setUser(null);\n      } catch (error) {\n        console.error('Erreur logout:', error);\n      }\n    };\n    const refreshUser = async () => {\n      try {\n        const response = await api.default.get('/auth/me');\n        const updatedUser = response.data;\n        await AsyncStorage.default.setItem('user', JSON.stringify(updatedUser));\n        setUser(updatedUser);\n      } catch (error) {\n        console.error('Erreur refresh user:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        token,\n        login,\n        logout,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"s3+shCSR/t4KywrfJXNOwwFNgWM=\");\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  };\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":137,"map":[[15,2,7,0,"Object"],[15,8,7,0],[15,9,7,0,"defineProperty"],[15,23,7,0],[15,24,7,0,"exports"],[15,31,7,0],[16,4,7,0,"enumerable"],[16,14,7,0],[17,4,7,0,"get"],[17,7,7,0],[17,18,7,0,"get"],[17,19,7,0],[18,6,7,0],[18,13,7,0,"AuthProvider"],[18,25,7,0],[19,4,7,0],[20,2,7,0],[21,2,87,0,"Object"],[21,8,87,0],[21,9,87,0,"defineProperty"],[21,23,87,0],[21,24,87,0,"exports"],[21,31,87,0],[22,4,87,0,"enumerable"],[22,14,87,0],[23,4,87,0,"get"],[23,7,87,0],[23,18,87,0,"get"],[23,19,87,0],[24,6,87,0],[24,13,87,0,"useAuth"],[24,20,87,0],[25,4,87,0],[26,2,87,0],[27,2,1,0],[27,6,1,0,"_react"],[27,12,1,0],[27,15,1,0,"require"],[27,22,1,0],[27,23,1,0,"_dependencyMap"],[27,37,1,0],[28,2,2,0],[28,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[28,42,2,0],[28,45,2,0,"require"],[28,52,2,0],[28,53,2,0,"_dependencyMap"],[28,67,2,0],[29,2,2,0],[29,6,2,0,"AsyncStorage"],[29,18,2,0],[29,21,2,0,"_interopDefault"],[29,36,2,0],[29,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[29,73,2,0],[30,2,3,0],[30,6,3,0,"_utilsApi"],[30,15,3,0],[30,18,3,0,"require"],[30,25,3,0],[30,26,3,0,"_dependencyMap"],[30,40,3,0],[31,2,3,0],[31,6,3,0,"api"],[31,9,3,0],[31,12,3,0,"_interopDefault"],[31,27,3,0],[31,28,3,0,"_utilsApi"],[31,37,3,0],[32,2,3,31],[32,6,3,31,"_reactJsxDevRuntime"],[32,25,3,31],[32,28,3,31,"require"],[32,35,3,31],[32,36,3,31,"_dependencyMap"],[32,50,3,31],[33,2,5,0],[33,8,5,6,"AuthContext"],[33,19,5,17],[33,35,5,20],[33,39,5,20,"createContext"],[33,45,5,33],[33,46,5,33,"createContext"],[33,59,5,33],[33,61,5,34],[33,62,5,35],[34,2,7,7],[34,8,7,13,"AuthProvider"],[34,20,7,25],[34,23,7,28,"AuthProvider"],[34,24,7,29],[35,4,7,31,"children"],[36,2,7,40],[36,3,7,41],[36,8,7,46],[37,4,7,46,"_s"],[37,6,7,46],[38,4,8,2],[38,10,8,8],[38,11,8,9,"user"],[38,15,8,13],[38,17,8,15,"setUser"],[38,24,8,22],[38,25,8,23],[38,28,8,26],[38,32,8,26,"useState"],[38,38,8,34],[38,39,8,34,"useState"],[38,47,8,34],[38,49,8,35],[38,53,8,39],[38,54,8,40],[39,4,9,2],[39,10,9,8],[39,11,9,9,"loading"],[39,18,9,16],[39,20,9,18,"setLoading"],[39,30,9,28],[39,31,9,29],[39,34,9,32],[39,38,9,32,"useState"],[39,44,9,40],[39,45,9,40,"useState"],[39,53,9,40],[39,55,9,41],[39,59,9,45],[39,60,9,46],[40,4,10,2],[40,10,10,8],[40,11,10,9,"token"],[40,16,10,14],[40,18,10,16,"setToken"],[40,26,10,24],[40,27,10,25],[40,30,10,28],[40,34,10,28,"useState"],[40,40,10,36],[40,41,10,36,"useState"],[40,49,10,36],[40,51,10,37],[40,55,10,41],[40,56,10,42],[42,4,12,2],[43,4,13,2],[43,8,13,2,"useEffect"],[43,14,13,11],[43,15,13,11,"useEffect"],[43,24,13,11],[43,26,13,12],[43,32,13,18],[44,6,14,4,"loadUser"],[44,14,14,12],[44,15,14,13],[44,16,14,14],[45,4,15,2],[45,5,15,3],[45,7,15,5],[45,9,15,7],[45,10,15,8],[46,4,17,2],[46,10,17,8,"loadUser"],[46,18,17,16],[46,21,17,19],[46,27,17,19,"loadUser"],[46,28,17,19],[46,33,17,31],[47,6,18,4],[47,10,18,8],[48,8,19,6],[48,14,19,12,"storedToken"],[48,25,19,23],[48,28,19,26],[48,34,19,32,"AsyncStorage"],[48,46,19,44],[48,47,19,44,"default"],[48,54,19,44],[48,55,19,45,"getItem"],[48,62,19,52],[48,63,19,53],[48,74,19,64],[48,75,19,65],[49,8,20,6],[49,14,20,12,"storedUser"],[49,24,20,22],[49,27,20,25],[49,33,20,31,"AsyncStorage"],[49,45,20,43],[49,46,20,43,"default"],[49,53,20,43],[49,54,20,44,"getItem"],[49,61,20,51],[49,62,20,52],[49,68,20,58],[49,69,20,59],[50,8,22,6],[50,12,22,10,"storedToken"],[50,23,22,21],[50,27,22,25,"storedUser"],[50,37,22,35],[50,39,22,37],[51,10,23,8,"setToken"],[51,18,23,16],[51,19,23,17,"storedToken"],[51,30,23,28],[51,31,23,29],[52,10,24,8,"setUser"],[52,17,24,15],[52,18,24,16,"JSON"],[52,22,24,20],[52,23,24,21,"parse"],[52,28,24,26],[52,29,24,27,"storedUser"],[52,39,24,37],[52,40,24,38],[52,41,24,39],[53,8,25,6],[54,6,26,4],[54,7,26,5],[54,8,26,6],[54,15,26,13,"error"],[54,20,26,18],[54,22,26,20],[55,8,27,6,"console"],[55,15,27,13],[55,16,27,14,"error"],[55,21,27,19],[55,22,27,20],[55,54,27,52],[55,56,27,54,"error"],[55,61,27,59],[55,62,27,60],[56,6,28,4],[56,7,28,5],[56,16,28,14],[57,8,29,6,"setLoading"],[57,18,29,16],[57,19,29,17],[57,24,29,22],[57,25,29,23],[58,6,30,4],[59,4,31,2],[59,5,31,3],[60,4,33,2],[60,10,33,8,"login"],[60,15,33,13],[60,18,33,16],[60,24,33,16,"login"],[60,25,33,23,"identifier"],[60,35,33,33],[60,37,33,35,"password"],[60,45,33,43],[60,47,33,45,"accessToken"],[60,58,33,56],[60,61,33,59],[60,65,33,63],[60,70,33,68],[61,6,34,4],[61,10,34,8],[62,8,35,6],[62,14,35,12,"payload"],[62,21,35,19],[62,24,35,22,"accessToken"],[62,35,35,33],[62,38,36,10],[63,10,36,12,"accessToken"],[64,8,36,24],[64,9,36,25],[64,12,37,10],[65,10,37,12,"identifier"],[65,20,37,22],[66,10,37,24,"password"],[67,8,37,33],[67,9,37,34],[68,8,39,6],[68,14,39,12,"response"],[68,22,39,20],[68,25,39,23],[68,31,39,29,"api"],[68,34,39,32],[68,35,39,32,"default"],[68,42,39,32],[68,43,39,33,"post"],[68,47,39,37],[68,48,39,38],[68,61,39,51],[68,63,39,53,"payload"],[68,70,39,60],[68,71,39,61],[69,8,40,6],[69,14,40,12],[70,10,40,14,"token"],[70,15,40,19],[70,17,40,21,"newToken"],[70,25,40,29],[71,10,40,31,"user"],[71,14,40,35],[71,16,40,37,"newUser"],[72,8,40,45],[72,9,40,46],[72,12,40,49,"response"],[72,20,40,57],[72,21,40,58,"data"],[72,25,40,62],[73,8,42,6],[73,14,42,12,"AsyncStorage"],[73,26,42,24],[73,27,42,24,"default"],[73,34,42,24],[73,35,42,25,"setItem"],[73,42,42,32],[73,43,42,33],[73,54,42,44],[73,56,42,46,"newToken"],[73,64,42,54],[73,65,42,55],[74,8,43,6],[74,14,43,12,"AsyncStorage"],[74,26,43,24],[74,27,43,24,"default"],[74,34,43,24],[74,35,43,25,"setItem"],[74,42,43,32],[74,43,43,33],[74,49,43,39],[74,51,43,41,"JSON"],[74,55,43,45],[74,56,43,46,"stringify"],[74,65,43,55],[74,66,43,56,"newUser"],[74,73,43,63],[74,74,43,64],[74,75,43,65],[75,8,45,6,"setToken"],[75,16,45,14],[75,17,45,15,"newToken"],[75,25,45,23],[75,26,45,24],[76,8,46,6,"setUser"],[76,15,46,13],[76,16,46,14,"newUser"],[76,23,46,21],[76,24,46,22],[77,8,48,6],[77,15,48,13],[78,10,48,15,"success"],[78,17,48,22],[78,19,48,24],[79,8,48,29],[79,9,48,30],[80,6,49,4],[80,7,49,5],[80,8,49,6],[80,15,49,13,"error"],[80,20,49,18],[80,22,49,20],[81,8,50,6,"console"],[81,15,50,13],[81,16,50,14,"error"],[81,21,50,19],[81,22,50,20],[81,37,50,35],[81,39,50,37,"error"],[81,44,50,42],[81,45,50,43],[82,8,51,6],[82,15,51,13],[83,10,52,8,"success"],[83,17,52,15],[83,19,52,17],[83,24,52,22],[84,10,53,8,"error"],[84,15,53,13],[84,17,53,15,"error"],[84,22,53,20],[84,23,53,21,"response"],[84,31,53,29],[84,33,53,31,"data"],[84,37,53,35],[84,39,53,37,"error"],[84,44,53,42],[84,48,53,46],[85,8,54,6],[85,9,54,7],[86,6,55,4],[87,4,56,2],[87,5,56,3],[88,4,58,2],[88,10,58,8,"logout"],[88,16,58,14],[88,19,58,17],[88,25,58,17,"logout"],[88,26,58,17],[88,31,58,29],[89,6,59,4],[89,10,59,8],[90,8,60,6],[90,14,60,12,"AsyncStorage"],[90,26,60,24],[90,27,60,24,"default"],[90,34,60,24],[90,35,60,25,"removeItem"],[90,45,60,35],[90,46,60,36],[90,57,60,47],[90,58,60,48],[91,8,61,6],[91,14,61,12,"AsyncStorage"],[91,26,61,24],[91,27,61,24,"default"],[91,34,61,24],[91,35,61,25,"removeItem"],[91,45,61,35],[91,46,61,36],[91,52,61,42],[91,53,61,43],[92,8,62,6,"setToken"],[92,16,62,14],[92,17,62,15],[92,21,62,19],[92,22,62,20],[93,8,63,6,"setUser"],[93,15,63,13],[93,16,63,14],[93,20,63,18],[93,21,63,19],[94,6,64,4],[94,7,64,5],[94,8,64,6],[94,15,64,13,"error"],[94,20,64,18],[94,22,64,20],[95,8,65,6,"console"],[95,15,65,13],[95,16,65,14,"error"],[95,21,65,19],[95,22,65,20],[95,38,65,36],[95,40,65,38,"error"],[95,45,65,43],[95,46,65,44],[96,6,66,4],[97,4,67,2],[97,5,67,3],[98,4,69,2],[98,10,69,8,"refreshUser"],[98,21,69,19],[98,24,69,22],[98,30,69,22,"refreshUser"],[98,31,69,22],[98,36,69,34],[99,6,70,4],[99,10,70,8],[100,8,71,6],[100,14,71,12,"response"],[100,22,71,20],[100,25,71,23],[100,31,71,29,"api"],[100,34,71,32],[100,35,71,32,"default"],[100,42,71,32],[100,43,71,33,"get"],[100,46,71,36],[100,47,71,37],[100,57,71,47],[100,58,71,48],[101,8,72,6],[101,14,72,12,"updatedUser"],[101,25,72,23],[101,28,72,26,"response"],[101,36,72,34],[101,37,72,35,"data"],[101,41,72,39],[102,8,73,6],[102,14,73,12,"AsyncStorage"],[102,26,73,24],[102,27,73,24,"default"],[102,34,73,24],[102,35,73,25,"setItem"],[102,42,73,32],[102,43,73,33],[102,49,73,39],[102,51,73,41,"JSON"],[102,55,73,45],[102,56,73,46,"stringify"],[102,65,73,55],[102,66,73,56,"updatedUser"],[102,77,73,67],[102,78,73,68],[102,79,73,69],[103,8,74,6,"setUser"],[103,15,74,13],[103,16,74,14,"updatedUser"],[103,27,74,25],[103,28,74,26],[104,6,75,4],[104,7,75,5],[104,8,75,6],[104,15,75,13,"error"],[104,20,75,18],[104,22,75,20],[105,8,76,6,"console"],[105,15,76,13],[105,16,76,14,"error"],[105,21,76,19],[105,22,76,20],[105,44,76,42],[105,46,76,44,"error"],[105,51,76,49],[105,52,76,50],[106,6,77,4],[107,4,78,2],[107,5,78,3],[108,4,80,2],[108,24,81,4],[108,28,81,4,"_reactJsxDevRuntime"],[108,47,81,4],[108,48,81,4,"jsxDEV"],[108,54,81,4],[108,56,81,5,"AuthContext"],[108,67,81,16],[108,68,81,17,"Provider"],[108,76,81,25],[109,6,81,26,"value"],[109,11,81,31],[109,13,81,33],[110,8,81,35,"user"],[110,12,81,39],[111,8,81,41,"loading"],[111,15,81,48],[112,8,81,50,"token"],[112,13,81,55],[113,8,81,57,"login"],[113,13,81,62],[114,8,81,64,"logout"],[114,14,81,70],[115,8,81,72,"refreshUser"],[116,6,81,84],[116,7,81,86],[117,6,81,86,"children"],[117,14,81,86],[117,16,82,7,"children"],[118,4,82,15],[119,6,82,15,"fileName"],[119,14,82,15],[119,16,82,15,"_jsxFileName"],[119,28,82,15],[120,6,82,15,"lineNumber"],[120,16,82,15],[121,6,82,15,"columnNumber"],[121,18,82,15],[122,4,82,15],[122,11,83,26],[122,12,83,27],[123,2,85,0],[123,3,85,1],[124,2,85,2,"_s"],[124,4,85,2],[124,5,7,13,"AuthProvider"],[124,17,7,25],[125,2,7,25,"_c"],[125,4,7,25],[125,7,7,13,"AuthProvider"],[125,19,7,25],[126,2,87,7],[126,8,87,13,"useAuth"],[126,15,87,20],[126,18,87,23,"useAuth"],[126,19,87,23],[126,24,87,29],[127,4,87,29,"_s2"],[127,7,87,29],[128,4,88,2],[128,10,88,8,"context"],[128,17,88,15],[128,20,88,18],[128,24,88,18,"useContext"],[128,30,88,28],[128,31,88,28,"useContext"],[128,41,88,28],[128,43,88,29,"AuthContext"],[128,54,88,40],[128,55,88,41],[129,4,89,2],[129,8,89,6],[129,9,89,7,"context"],[129,16,89,14],[129,18,89,16],[130,6,90,4],[130,12,90,10],[130,16,90,14,"Error"],[130,21,90,19],[130,22,90,20],[130,67,90,65],[130,68,90,66],[131,4,91,2],[132,4,92,2],[132,11,92,9,"context"],[132,18,92,16],[133,2,93,0],[133,3,93,1],[134,2,93,2,"_s2"],[134,5,93,2],[134,6,87,13,"useAuth"],[134,13,87,20],[135,2,87,20],[135,6,87,20,"_c"],[135,8,87,20],[136,2,87,20,"$RefreshReg$"],[136,14,87,20],[136,15,87,20,"_c"],[136,17,87,20],[137,0,87,20],[137,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadUser","login","logout","refreshUser","useAuth"],"mappings":"AAA;4BCM;YCM;GDE;mBEE;GFc;gBGE;GHuB;iBIE;GJS;sBKE;GLS;CDO;uBOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}