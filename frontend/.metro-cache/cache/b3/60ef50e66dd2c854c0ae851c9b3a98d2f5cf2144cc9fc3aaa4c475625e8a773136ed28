{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../utils/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":31,"index":180}}],"key":"XoJ+jbKCrEi38eKczMqtlbk+TCk=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/context/AuthContext.js\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _utilsApi = require(_dependencyMap[2], \"../utils/api\");\n  var api = _interopDefault(_utilsApi);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)();\n  const AuthProvider = ({\n    children\n  }) => {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    const [token, setToken] = (0, _react.useState)(null);\n\n    // Charger l'utilisateur depuis le cache au dÃ©marrage\n    (0, _react.useEffect)(() => {\n      loadUser();\n    }, []);\n    const loadUser = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('authToken');\n        const storedUser = await AsyncStorage.default.getItem('user');\n        if (storedToken && storedUser) {\n          setToken(storedToken);\n          setUser(JSON.parse(storedUser));\n        }\n      } catch (error) {\n        console.error('Erreur chargement utilisateur:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (identifier, password, accessToken = null) => {\n      try {\n        const payload = accessToken ? {\n          accessToken\n        } : {\n          identifier,\n          password\n        };\n        const response = await api.default.post('/auth/login', payload);\n        const {\n          token: newToken,\n          user: newUser\n        } = response.data;\n        await AsyncStorage.default.setItem('authToken', newToken);\n        await AsyncStorage.default.setItem('user', JSON.stringify(newUser));\n        setToken(newToken);\n        setUser(newUser);\n        return {\n          success: true\n        };\n      } catch (error) {\n        console.error('Erreur login:', error);\n        return {\n          success: false,\n          error: error.response?.data?.error || 'Erreur de connexion'\n        };\n      }\n    };\n    const logout = async () => {\n      try {\n        await AsyncStorage.default.removeItem('authToken');\n        await AsyncStorage.default.removeItem('user');\n        setToken(null);\n        setUser(null);\n      } catch (error) {\n        console.error('Erreur logout:', error);\n      }\n    };\n    const refreshUser = async () => {\n      try {\n        const response = await api.default.get('/auth/me');\n        const updatedUser = response.data;\n        await AsyncStorage.default.setItem('user', JSON.stringify(updatedUser));\n        setUser(updatedUser);\n      } catch (error) {\n        console.error('Erreur refresh user:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        token,\n        login,\n        logout,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 5\n    }, this);\n  };\n  const useAuth = () => {\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  };\n});","lineCount":128,"map":[[13,2,7,0,"Object"],[13,8,7,0],[13,9,7,0,"defineProperty"],[13,23,7,0],[13,24,7,0,"exports"],[13,31,7,0],[14,4,7,0,"enumerable"],[14,14,7,0],[15,4,7,0,"get"],[15,7,7,0],[15,18,7,0,"get"],[15,19,7,0],[16,6,7,0],[16,13,7,0,"AuthProvider"],[16,25,7,0],[17,4,7,0],[18,2,7,0],[19,2,87,0,"Object"],[19,8,87,0],[19,9,87,0,"defineProperty"],[19,23,87,0],[19,24,87,0,"exports"],[19,31,87,0],[20,4,87,0,"enumerable"],[20,14,87,0],[21,4,87,0,"get"],[21,7,87,0],[21,18,87,0,"get"],[21,19,87,0],[22,6,87,0],[22,13,87,0,"useAuth"],[22,20,87,0],[23,4,87,0],[24,2,87,0],[25,2,1,0],[25,6,1,0,"_react"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,2,0],[26,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[26,42,2,0],[26,45,2,0,"require"],[26,52,2,0],[26,53,2,0,"_dependencyMap"],[26,67,2,0],[27,2,2,0],[27,6,2,0,"AsyncStorage"],[27,18,2,0],[27,21,2,0,"_interopDefault"],[27,36,2,0],[27,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[27,73,2,0],[28,2,3,0],[28,6,3,0,"_utilsApi"],[28,15,3,0],[28,18,3,0,"require"],[28,25,3,0],[28,26,3,0,"_dependencyMap"],[28,40,3,0],[29,2,3,0],[29,6,3,0,"api"],[29,9,3,0],[29,12,3,0,"_interopDefault"],[29,27,3,0],[29,28,3,0,"_utilsApi"],[29,37,3,0],[30,2,3,31],[30,6,3,31,"_reactJsxDevRuntime"],[30,25,3,31],[30,28,3,31,"require"],[30,35,3,31],[30,36,3,31,"_dependencyMap"],[30,50,3,31],[31,2,5,0],[31,8,5,6,"AuthContext"],[31,19,5,17],[31,35,5,20],[31,39,5,20,"createContext"],[31,45,5,33],[31,46,5,33,"createContext"],[31,59,5,33],[31,61,5,34],[31,62,5,35],[32,2,7,7],[32,8,7,13,"AuthProvider"],[32,20,7,25],[32,23,7,28,"AuthProvider"],[32,24,7,29],[33,4,7,31,"children"],[34,2,7,40],[34,3,7,41],[34,8,7,46],[35,4,8,2],[35,10,8,8],[35,11,8,9,"user"],[35,15,8,13],[35,17,8,15,"setUser"],[35,24,8,22],[35,25,8,23],[35,28,8,26],[35,32,8,26,"useState"],[35,38,8,34],[35,39,8,34,"useState"],[35,47,8,34],[35,49,8,35],[35,53,8,39],[35,54,8,40],[36,4,9,2],[36,10,9,8],[36,11,9,9,"loading"],[36,18,9,16],[36,20,9,18,"setLoading"],[36,30,9,28],[36,31,9,29],[36,34,9,32],[36,38,9,32,"useState"],[36,44,9,40],[36,45,9,40,"useState"],[36,53,9,40],[36,55,9,41],[36,59,9,45],[36,60,9,46],[37,4,10,2],[37,10,10,8],[37,11,10,9,"token"],[37,16,10,14],[37,18,10,16,"setToken"],[37,26,10,24],[37,27,10,25],[37,30,10,28],[37,34,10,28,"useState"],[37,40,10,36],[37,41,10,36,"useState"],[37,49,10,36],[37,51,10,37],[37,55,10,41],[37,56,10,42],[39,4,12,2],[40,4,13,2],[40,8,13,2,"useEffect"],[40,14,13,11],[40,15,13,11,"useEffect"],[40,24,13,11],[40,26,13,12],[40,32,13,18],[41,6,14,4,"loadUser"],[41,14,14,12],[41,15,14,13],[41,16,14,14],[42,4,15,2],[42,5,15,3],[42,7,15,5],[42,9,15,7],[42,10,15,8],[43,4,17,2],[43,10,17,8,"loadUser"],[43,18,17,16],[43,21,17,19],[43,27,17,19,"loadUser"],[43,28,17,19],[43,33,17,31],[44,6,18,4],[44,10,18,8],[45,8,19,6],[45,14,19,12,"storedToken"],[45,25,19,23],[45,28,19,26],[45,34,19,32,"AsyncStorage"],[45,46,19,44],[45,47,19,44,"default"],[45,54,19,44],[45,55,19,45,"getItem"],[45,62,19,52],[45,63,19,53],[45,74,19,64],[45,75,19,65],[46,8,20,6],[46,14,20,12,"storedUser"],[46,24,20,22],[46,27,20,25],[46,33,20,31,"AsyncStorage"],[46,45,20,43],[46,46,20,43,"default"],[46,53,20,43],[46,54,20,44,"getItem"],[46,61,20,51],[46,62,20,52],[46,68,20,58],[46,69,20,59],[47,8,22,6],[47,12,22,10,"storedToken"],[47,23,22,21],[47,27,22,25,"storedUser"],[47,37,22,35],[47,39,22,37],[48,10,23,8,"setToken"],[48,18,23,16],[48,19,23,17,"storedToken"],[48,30,23,28],[48,31,23,29],[49,10,24,8,"setUser"],[49,17,24,15],[49,18,24,16,"JSON"],[49,22,24,20],[49,23,24,21,"parse"],[49,28,24,26],[49,29,24,27,"storedUser"],[49,39,24,37],[49,40,24,38],[49,41,24,39],[50,8,25,6],[51,6,26,4],[51,7,26,5],[51,8,26,6],[51,15,26,13,"error"],[51,20,26,18],[51,22,26,20],[52,8,27,6,"console"],[52,15,27,13],[52,16,27,14,"error"],[52,21,27,19],[52,22,27,20],[52,54,27,52],[52,56,27,54,"error"],[52,61,27,59],[52,62,27,60],[53,6,28,4],[53,7,28,5],[53,16,28,14],[54,8,29,6,"setLoading"],[54,18,29,16],[54,19,29,17],[54,24,29,22],[54,25,29,23],[55,6,30,4],[56,4,31,2],[56,5,31,3],[57,4,33,2],[57,10,33,8,"login"],[57,15,33,13],[57,18,33,16],[57,24,33,16,"login"],[57,25,33,23,"identifier"],[57,35,33,33],[57,37,33,35,"password"],[57,45,33,43],[57,47,33,45,"accessToken"],[57,58,33,56],[57,61,33,59],[57,65,33,63],[57,70,33,68],[58,6,34,4],[58,10,34,8],[59,8,35,6],[59,14,35,12,"payload"],[59,21,35,19],[59,24,35,22,"accessToken"],[59,35,35,33],[59,38,36,10],[60,10,36,12,"accessToken"],[61,8,36,24],[61,9,36,25],[61,12,37,10],[62,10,37,12,"identifier"],[62,20,37,22],[63,10,37,24,"password"],[64,8,37,33],[64,9,37,34],[65,8,39,6],[65,14,39,12,"response"],[65,22,39,20],[65,25,39,23],[65,31,39,29,"api"],[65,34,39,32],[65,35,39,32,"default"],[65,42,39,32],[65,43,39,33,"post"],[65,47,39,37],[65,48,39,38],[65,61,39,51],[65,63,39,53,"payload"],[65,70,39,60],[65,71,39,61],[66,8,40,6],[66,14,40,12],[67,10,40,14,"token"],[67,15,40,19],[67,17,40,21,"newToken"],[67,25,40,29],[68,10,40,31,"user"],[68,14,40,35],[68,16,40,37,"newUser"],[69,8,40,45],[69,9,40,46],[69,12,40,49,"response"],[69,20,40,57],[69,21,40,58,"data"],[69,25,40,62],[70,8,42,6],[70,14,42,12,"AsyncStorage"],[70,26,42,24],[70,27,42,24,"default"],[70,34,42,24],[70,35,42,25,"setItem"],[70,42,42,32],[70,43,42,33],[70,54,42,44],[70,56,42,46,"newToken"],[70,64,42,54],[70,65,42,55],[71,8,43,6],[71,14,43,12,"AsyncStorage"],[71,26,43,24],[71,27,43,24,"default"],[71,34,43,24],[71,35,43,25,"setItem"],[71,42,43,32],[71,43,43,33],[71,49,43,39],[71,51,43,41,"JSON"],[71,55,43,45],[71,56,43,46,"stringify"],[71,65,43,55],[71,66,43,56,"newUser"],[71,73,43,63],[71,74,43,64],[71,75,43,65],[72,8,45,6,"setToken"],[72,16,45,14],[72,17,45,15,"newToken"],[72,25,45,23],[72,26,45,24],[73,8,46,6,"setUser"],[73,15,46,13],[73,16,46,14,"newUser"],[73,23,46,21],[73,24,46,22],[74,8,48,6],[74,15,48,13],[75,10,48,15,"success"],[75,17,48,22],[75,19,48,24],[76,8,48,29],[76,9,48,30],[77,6,49,4],[77,7,49,5],[77,8,49,6],[77,15,49,13,"error"],[77,20,49,18],[77,22,49,20],[78,8,50,6,"console"],[78,15,50,13],[78,16,50,14,"error"],[78,21,50,19],[78,22,50,20],[78,37,50,35],[78,39,50,37,"error"],[78,44,50,42],[78,45,50,43],[79,8,51,6],[79,15,51,13],[80,10,52,8,"success"],[80,17,52,15],[80,19,52,17],[80,24,52,22],[81,10,53,8,"error"],[81,15,53,13],[81,17,53,15,"error"],[81,22,53,20],[81,23,53,21,"response"],[81,31,53,29],[81,33,53,31,"data"],[81,37,53,35],[81,39,53,37,"error"],[81,44,53,42],[81,48,53,46],[82,8,54,6],[82,9,54,7],[83,6,55,4],[84,4,56,2],[84,5,56,3],[85,4,58,2],[85,10,58,8,"logout"],[85,16,58,14],[85,19,58,17],[85,25,58,17,"logout"],[85,26,58,17],[85,31,58,29],[86,6,59,4],[86,10,59,8],[87,8,60,6],[87,14,60,12,"AsyncStorage"],[87,26,60,24],[87,27,60,24,"default"],[87,34,60,24],[87,35,60,25,"removeItem"],[87,45,60,35],[87,46,60,36],[87,57,60,47],[87,58,60,48],[88,8,61,6],[88,14,61,12,"AsyncStorage"],[88,26,61,24],[88,27,61,24,"default"],[88,34,61,24],[88,35,61,25,"removeItem"],[88,45,61,35],[88,46,61,36],[88,52,61,42],[88,53,61,43],[89,8,62,6,"setToken"],[89,16,62,14],[89,17,62,15],[89,21,62,19],[89,22,62,20],[90,8,63,6,"setUser"],[90,15,63,13],[90,16,63,14],[90,20,63,18],[90,21,63,19],[91,6,64,4],[91,7,64,5],[91,8,64,6],[91,15,64,13,"error"],[91,20,64,18],[91,22,64,20],[92,8,65,6,"console"],[92,15,65,13],[92,16,65,14,"error"],[92,21,65,19],[92,22,65,20],[92,38,65,36],[92,40,65,38,"error"],[92,45,65,43],[92,46,65,44],[93,6,66,4],[94,4,67,2],[94,5,67,3],[95,4,69,2],[95,10,69,8,"refreshUser"],[95,21,69,19],[95,24,69,22],[95,30,69,22,"refreshUser"],[95,31,69,22],[95,36,69,34],[96,6,70,4],[96,10,70,8],[97,8,71,6],[97,14,71,12,"response"],[97,22,71,20],[97,25,71,23],[97,31,71,29,"api"],[97,34,71,32],[97,35,71,32,"default"],[97,42,71,32],[97,43,71,33,"get"],[97,46,71,36],[97,47,71,37],[97,57,71,47],[97,58,71,48],[98,8,72,6],[98,14,72,12,"updatedUser"],[98,25,72,23],[98,28,72,26,"response"],[98,36,72,34],[98,37,72,35,"data"],[98,41,72,39],[99,8,73,6],[99,14,73,12,"AsyncStorage"],[99,26,73,24],[99,27,73,24,"default"],[99,34,73,24],[99,35,73,25,"setItem"],[99,42,73,32],[99,43,73,33],[99,49,73,39],[99,51,73,41,"JSON"],[99,55,73,45],[99,56,73,46,"stringify"],[99,65,73,55],[99,66,73,56,"updatedUser"],[99,77,73,67],[99,78,73,68],[99,79,73,69],[100,8,74,6,"setUser"],[100,15,74,13],[100,16,74,14,"updatedUser"],[100,27,74,25],[100,28,74,26],[101,6,75,4],[101,7,75,5],[101,8,75,6],[101,15,75,13,"error"],[101,20,75,18],[101,22,75,20],[102,8,76,6,"console"],[102,15,76,13],[102,16,76,14,"error"],[102,21,76,19],[102,22,76,20],[102,44,76,42],[102,46,76,44,"error"],[102,51,76,49],[102,52,76,50],[103,6,77,4],[104,4,78,2],[104,5,78,3],[105,4,80,2],[105,24,81,4],[105,28,81,4,"_reactJsxDevRuntime"],[105,47,81,4],[105,48,81,4,"jsxDEV"],[105,54,81,4],[105,56,81,5,"AuthContext"],[105,67,81,16],[105,68,81,17,"Provider"],[105,76,81,25],[106,6,81,26,"value"],[106,11,81,31],[106,13,81,33],[107,8,81,35,"user"],[107,12,81,39],[108,8,81,41,"loading"],[108,15,81,48],[109,8,81,50,"token"],[109,13,81,55],[110,8,81,57,"login"],[110,13,81,62],[111,8,81,64,"logout"],[111,14,81,70],[112,8,81,72,"refreshUser"],[113,6,81,84],[113,7,81,86],[114,6,81,86,"children"],[114,14,81,86],[114,16,82,7,"children"],[115,4,82,15],[116,6,82,15,"fileName"],[116,14,82,15],[116,16,82,15,"_jsxFileName"],[116,28,82,15],[117,6,82,15,"lineNumber"],[117,16,82,15],[118,6,82,15,"columnNumber"],[118,18,82,15],[119,4,82,15],[119,11,83,26],[119,12,83,27],[120,2,85,0],[120,3,85,1],[121,2,87,7],[121,8,87,13,"useAuth"],[121,15,87,20],[121,18,87,23,"useAuth"],[121,19,87,23],[121,24,87,29],[122,4,88,2],[122,10,88,8,"context"],[122,17,88,15],[122,20,88,18],[122,24,88,18,"useContext"],[122,30,88,28],[122,31,88,28,"useContext"],[122,41,88,28],[122,43,88,29,"AuthContext"],[122,54,88,40],[122,55,88,41],[123,4,89,2],[123,8,89,6],[123,9,89,7,"context"],[123,16,89,14],[123,18,89,16],[124,6,90,4],[124,12,90,10],[124,16,90,14,"Error"],[124,21,90,19],[124,22,90,20],[124,67,90,65],[124,68,90,66],[125,4,91,2],[126,4,92,2],[126,11,92,9,"context"],[126,18,92,16],[127,2,93,0],[127,3,93,1],[128,0,93,2],[128,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadUser","login","logout","refreshUser","useAuth"],"mappings":"AAA;4BCM;YCM;GDE;mBEE;GFc;gBGE;GHuB;iBIE;GJS;sBKE;GLS;CDO;uBOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}