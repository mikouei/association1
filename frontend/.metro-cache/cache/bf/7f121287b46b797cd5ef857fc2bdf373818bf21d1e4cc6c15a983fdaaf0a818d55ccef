{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../utils/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":31,"index":180}}],"key":"XoJ+jbKCrEi38eKczMqtlbk+TCk=","exportNames":["*"],"imports":1}},{"name":"react/jsx-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"3suYSPX9nHbHZ1xNTsKXtKj0atE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){\"use strict\";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"AuthProvider\",{enumerable:!0,get:function(){return l}}),Object.defineProperty(_e,\"useAuth\",{enumerable:!0,get:function(){return c}});var t=r(d[0]),o=e(r(d[1])),s=e(r(d[2])),n=r(d[3]);const u=(0,t.createContext)(),l=({children:e})=>{const[l,c]=(0,t.useState)(null),[f,h]=(0,t.useState)(null),[w,y]=(0,t.useState)(!0),[I,p]=(0,t.useState)(null);(0,t.useEffect)(()=>{v()},[]);const v=async()=>{try{const e=await o.default.getItem('authToken'),t=await o.default.getItem('user'),s=await o.default.getItem('association');e&&t&&(p(e),c(JSON.parse(t)),s&&h(JSON.parse(s)))}catch(e){console.error('Erreur chargement utilisateur:',e)}finally{y(!1)}};return(0,n.jsx)(u.Provider,{value:{user:l,association:f,loading:w,token:I,login:async(e,t,n=null,u=null)=>{try{const l=n?{accessToken:n,associationCode:u}:{phone:e,password:t,associationCode:u},f=await s.default.post('/auth/login',l),{token:w,user:y,association:I}=f.data;return await o.default.removeItem('platformToken'),await o.default.setItem('authToken',w),await o.default.setItem('user',JSON.stringify(y)),I&&await o.default.setItem('association',JSON.stringify(I)),p(w),c(y),h(I),{success:!0}}catch(e){return console.error('Erreur login:',e),{success:!1,error:e.response?.data?.error||'Erreur de connexion'}}},logout:async()=>{try{await o.default.removeItem('authToken'),await o.default.removeItem('user'),await o.default.removeItem('association'),p(null),c(null),h(null)}catch(e){console.error('Erreur logout:',e)}},refreshUser:async()=>{try{const e=await s.default.get('/auth/me'),{association:t,...n}=e.data;await o.default.setItem('user',JSON.stringify(n)),c(n),t&&(await o.default.setItem('association',JSON.stringify(t)),h(t))}catch(e){console.error('Erreur refresh user:',e)}}},children:e})},c=()=>{const e=(0,t.useContext)(u);if(!e)throw new Error('useAuth must be used within an AuthProvider');return e}});","lineCount":1,"map":[[1,143,7,0,"Object"],[1,150,7,0,"defineProperty"],[1,165,7,0,"_e"],[1,168,7,0],[1,184,7,0,"enumerable"],[1,196,7,0],[1,198,7,0,"get"],[1,202,7,0],[1,220,7,0,"AuthProvider"],[1,221,7,0],[1,225,105,0,"Object"],[1,232,105,0,"defineProperty"],[1,247,105,0,"_e"],[1,250,105,0],[1,261,105,0,"enumerable"],[1,273,105,0],[1,275,105,0,"get"],[1,279,105,0],[1,297,105,0,"useAuth"],[1,298,105,0],[1,302,1,0],[1,306,1,0,"_react"],[1,308,1,0,"r"],[1,310,1,0,"d"],[1,312,1,0],[1,316,2,0,"AsyncStorage"],[1,318,2,0,"_interopDefault"],[1,320,2,0,"r"],[1,322,2,0,"d"],[1,324,2,0],[1,329,3,0,"api"],[1,331,3,0,"_interopDefault"],[1,333,3,0,"r"],[1,335,3,0,"d"],[1,337,3,0],[1,342,3,31,"_reactJsxRuntime"],[1,344,3,31,"r"],[1,346,3,31,"d"],[1,348,3,31],[1,352,5,0],[1,358,5,6,"AuthContext"],[1,361,5,20],[1,363,5,20,"createContext"],[1,365,5,33,"createContext"],[1,382,7,13,"AuthProvider"],[1,384,7,28,"AuthProvider"],[1,386,7,31,"children"],[1,401,8,2],[1,407,8,9,"user"],[1,409,8,15,"setUser"],[1,413,8,26],[1,415,8,26,"useState"],[1,417,8,34,"useState"],[1,427,8,35],[1,434,9,9,"association"],[1,436,9,22,"setAssociation"],[1,440,9,40],[1,442,9,40,"useState"],[1,444,9,48,"useState"],[1,454,9,49],[1,461,10,9,"loading"],[1,463,10,18,"setLoading"],[1,467,10,32],[1,469,10,32,"useState"],[1,471,10,40,"useState"],[1,482,10,41],[1,486,11,9,"token"],[1,488,11,16,"setToken"],[1,492,11,28],[1,494,11,28,"useState"],[1,496,11,36,"useState"],[1,506,11,37],[1,513,14,2],[1,515,14,2,"useEffect"],[1,517,14,11,"useEffect"],[1,528,14,12],[1,533,15,4,"loadUser"],[1,538,16,5],[1,542,18,2],[1,548,18,8,"loadUser"],[1,550,18,19,"async"],[1,560,19,4],[1,564,20,6],[1,570,20,12,"storedToken"],[1,578,20,32,"AsyncStorage"],[1,580,20,44,"default"],[1,588,20,45,"getItem"],[1,596,20,53],[1,609,21,12,"storedUser"],[1,617,21,31,"AsyncStorage"],[1,619,21,43,"default"],[1,627,21,44,"getItem"],[1,635,21,52],[1,643,22,12,"storedAssociation"],[1,651,22,38,"AsyncStorage"],[1,653,22,50,"default"],[1,661,22,51,"getItem"],[1,669,22,59],[1,684,24,10,"storedToken"],[1,687,24,25,"storedUser"],[1,691,25,8,"setToken"],[1,693,25,17,"storedToken"],[1,696,26,8,"setUser"],[1,698,26,16,"JSON"],[1,703,26,21,"parse"],[1,709,26,27,"storedUser"],[1,713,27,12,"storedAssociation"],[1,716,28,10,"setAssociation"],[1,718,28,25,"JSON"],[1,723,28,30,"parse"],[1,729,28,36,"storedAssociation"],[1,733,31,4],[1,734,31,6],[1,740,31,13,"error"],[1,743,32,6,"console"],[1,751,32,14,"error"],[1,757,32,20],[1,790,32,54,"error"],[1,792,33,4],[1,793,33,5],[1,801,34,6,"setLoading"],[1,804,34,17],[1,806,35,4],[1,809,98,2],[1,816,99,4],[1,818,99,4,"_reactJsxRuntime"],[1,820,99,4,"jsx"],[1,825,99,5,"AuthContext"],[1,827,99,17,"Provider"],[1,836,99,25],[1,837,99,26,"value"],[1,843,99,33],[1,844,99,35,"user"],[1,851,99,41,"association"],[1,865,99,54,"loading"],[1,875,99,63,"token"],[1,883,99,70,"login"],[1,889,38,16,"async"],[1,895,38,23,"identifier"],[1,897,38,35,"password"],[1,899,38,45,"accessToken"],[1,901,38,59],[1,906,38,65,"associationCode"],[1,908,38,83],[1,916,39,4],[1,920,40,6],[1,926,40,12,"payload"],[1,928,40,22,"accessToken"],[1,930,41,10],[1,931,41,12,"accessToken"],[1,945,41,25,"associationCode"],[1,964,42,10],[1,965,42,12,"phone"],[1,971,42,19,"identifier"],[1,973,42,31,"password"],[1,984,42,41,"associationCode"],[1,1003,44,12,"response"],[1,1011,44,29,"api"],[1,1013,44,32,"default"],[1,1021,44,33,"post"],[1,1026,44,38],[1,1040,44,53,"payload"],[1,1044,45,14,"token"],[1,1050,45,21,"newToken"],[1,1052,45,31,"user"],[1,1057,45,37,"newUser"],[1,1059,45,46,"association"],[1,1071,45,59,"newAssociation"],[1,1074,45,78,"response"],[1,1076,45,87,"data"],[1,1081,60,6],[1,1094,48,12,"AsyncStorage"],[1,1096,48,24,"default"],[1,1104,48,25,"removeItem"],[1,1115,48,36],[1,1138,50,12,"AsyncStorage"],[1,1140,50,24,"default"],[1,1148,50,25,"setItem"],[1,1156,50,33],[1,1168,50,46,"newToken"],[1,1177,51,12,"AsyncStorage"],[1,1179,51,24,"default"],[1,1187,51,25,"setItem"],[1,1195,51,33],[1,1202,51,41,"JSON"],[1,1207,51,46,"stringify"],[1,1217,51,56,"newUser"],[1,1221,52,10,"newAssociation"],[1,1230,53,14,"AsyncStorage"],[1,1232,53,26,"default"],[1,1240,53,27,"setItem"],[1,1248,53,35],[1,1262,53,50,"JSON"],[1,1267,53,55,"stringify"],[1,1277,53,65,"newAssociation"],[1,1281,56,6,"setToken"],[1,1283,56,15,"newToken"],[1,1286,57,6,"setUser"],[1,1288,57,14,"newUser"],[1,1291,58,6,"setAssociation"],[1,1293,58,21,"newAssociation"],[1,1296,60,13],[1,1297,60,15,"success"],[1,1306,60,24],[1,1308,61,4],[1,1309,61,6],[1,1315,61,13,"error"],[1,1318,63,6],[1,1325,62,6,"console"],[1,1333,62,14,"error"],[1,1339,62,20],[1,1355,62,37,"error"],[1,1358,63,13],[1,1359,64,8,"success"],[1,1368,64,17],[1,1370,65,8,"error"],[1,1376,65,15,"error"],[1,1378,65,21,"response"],[1,1388,65,31,"data"],[1,1394,65,37,"error"],[1,1401,65,46],[1,1423,67,4],[1,1426,99,77,"logout"],[1,1433,70,17,"async"],[1,1443,71,4],[1,1453,72,12,"AsyncStorage"],[1,1455,72,24,"default"],[1,1463,72,25,"removeItem"],[1,1474,72,36],[1,1493,73,12,"AsyncStorage"],[1,1495,73,24,"default"],[1,1503,73,25,"removeItem"],[1,1514,73,36],[1,1528,74,12,"AsyncStorage"],[1,1530,74,24,"default"],[1,1538,74,25,"removeItem"],[1,1549,74,36],[1,1564,75,6,"setToken"],[1,1566,75,15],[1,1572,76,6,"setUser"],[1,1574,76,14],[1,1580,77,6,"setAssociation"],[1,1582,77,21],[1,1587,78,4],[1,1588,78,6],[1,1594,78,13,"error"],[1,1597,79,6,"console"],[1,1605,79,14,"error"],[1,1611,79,20],[1,1628,79,38,"error"],[1,1630,80,4],[1,1633,99,85,"refreshUser"],[1,1645,83,22,"async"],[1,1655,84,4],[1,1659,85,6],[1,1665,85,12,"response"],[1,1673,85,29,"api"],[1,1675,85,32,"default"],[1,1683,85,33,"get"],[1,1687,85,37],[1,1700,86,14,"association"],[1,1712,86,27,"updatedAssociation"],[1,1717,86,50,"updatedUser"],[1,1720,86,66,"response"],[1,1722,86,75,"data"],[1,1733,87,12,"AsyncStorage"],[1,1735,87,24,"default"],[1,1743,87,25,"setItem"],[1,1751,87,33],[1,1758,87,41,"JSON"],[1,1763,87,46,"stringify"],[1,1773,87,56,"updatedUser"],[1,1777,88,6,"setUser"],[1,1779,88,14,"updatedUser"],[1,1782,89,10,"updatedAssociation"],[1,1792,90,14,"AsyncStorage"],[1,1794,90,26,"default"],[1,1802,90,27,"setItem"],[1,1810,90,35],[1,1824,90,50,"JSON"],[1,1829,90,55,"stringify"],[1,1839,90,65,"updatedAssociation"],[1,1843,91,8,"setAssociation"],[1,1845,91,23,"updatedAssociation"],[1,1848,93,4],[1,1849,93,6],[1,1855,93,13,"error"],[1,1858,94,6,"console"],[1,1866,94,14,"error"],[1,1872,94,20],[1,1895,94,44,"error"],[1,1897,95,4],[1,1901,99,99,"children"],[1,1910,100,7,"children"],[1,1915,105,13,"useAuth"],[1,1917,105,23,"useAuth"],[1,1922,106,2],[1,1928,106,8,"context"],[1,1931,106,18],[1,1933,106,18,"useContext"],[1,1935,106,28,"useContext"],[1,1947,106,29,"AuthContext"],[1,1950,107,2],[1,1954,107,7,"context"],[1,1956,108,4],[1,1962,108,10],[1,1966,108,14,"Error"],[1,1972,108,20],[1,2019,110,2],[1,2026,110,9,"context"],[1,2028,111,2],[1,2031]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadUser","login","logout","refreshUser","useAuth"],"mappings":"AAA;4BCM;YCO;GDE;mBEE;GFkB;gBGE;GH8B;iBIE;GJW;sBKE;GLa;CDO;uBOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}